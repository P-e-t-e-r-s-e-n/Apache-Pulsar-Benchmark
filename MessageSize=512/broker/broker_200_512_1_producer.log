2025-12-05T10:02:41,625+0000 [main] INFO  org.apache.pulsar.testclient.PerformanceProducer - JVM args [-Djava.net.preferIPv4Stack=true, -Dorg.xerial.snappy.use.systemlib=true, -Dlog4j.configurationFile=log4j2.yaml, -Dio.netty.tryReflectionSetAccessible=true, -Dorg.apache.pulsar.shade.io.netty.tryReflectionSetAccessible=true, --add-opens=java.base/sun.net=ALL-UNNAMED, --add-opens=java.base/java.lang=ALL-UNNAMED, --add-opens=java.base/java.util.zip=ALL-UNNAMED, --add-opens=java.base/java.nio=ALL-UNNAMED, --add-opens=java.base/jdk.internal.misc=ALL-UNNAMED, -Dpulsar.allocator.exit_on_oom=true, -Dio.netty.recycler.maxCapacityPerThread=4096, -Dpulsar.log.appender=Console, -Dpulsar.log.immediateFlush=false, -Dpulsar.log.dir=/pulsar/logs, -Dpulsar.log.file=pulsar-perftest.log]
2025-12-05T10:02:41,722+0000 [main] INFO  org.apache.pulsar.testclient.PerformanceProducer - Netty max memory (PlatformDependent.maxDirectMemory()) 29 GB
2025-12-05T10:02:41,722+0000 [main] INFO  org.apache.pulsar.testclient.PerformanceProducer - JVM max heap memory (Runtime.getRuntime().maxMemory()) 29 GB
2025-12-05T10:02:41,793+0000 [main] INFO  org.apache.pulsar.testclient.PerformanceProducer - Starting Pulsar perf producer with config: {
  "serviceURL" : "pulsar://my-pulsar-proxy:6650/",
  "authPluginClassName" : "",
  "authParams" : "",
  "sslfactoryPlugin" : null,
  "sslFactoryPluginParams" : null,
  "tlsTrustCertsFilePath" : "",
  "tlsAllowInsecureConnection" : false,
  "tlsHostnameVerificationEnable" : false,
  "maxConnections" : 1,
  "statsIntervalSeconds" : 0,
  "ioThreads" : 1,
  "enableBusyWait" : false,
  "listenerName" : null,
  "listenerThreads" : 1,
  "maxLookupRequest" : 50000,
  "deprecatedAuthPluginClassName" : null,
  "memoryLimit" : 0,
  "topics" : [ "persistent://public/default/sync-topic" ],
  "numTopics" : 1,
  "numTestThreads" : 1,
  "msgRate" : 10000,
  "msgSize" : 512,
  "numProducers" : 1,
  "separator" : "-",
  "sendTimeout" : 0,
  "producerName" : null,
  "adminURL" : "http://my-pulsar-proxy:80/",
  "maxOutstanding" : 0,
  "maxPendingMessagesAcrossPartitions" : 0,
  "partitions" : null,
  "numMessages" : 0,
  "compression" : "NONE",
  "payloadFilename" : null,
  "payloadDelimiter" : "\\n",
  "batchTimeMillis" : 1.0,
  "disableBatching" : false,
  "batchMaxMessages" : 1000,
  "batchMaxBytes" : 4194304,
  "testTime" : 60,
  "warmupTimeSeconds" : 1.0,
  "encKeyName" : null,
  "encKeyFile" : null,
  "delay" : 0,
  "delayRange" : null,
  "setEventTime" : false,
  "exitOnFailure" : false,
  "messageKeyGenerationMode" : null,
  "producerAccessMode" : "Shared",
  "formatPayload" : false,
  "formatterClass" : "org.apache.pulsar.testclient.DefaultMessageFormatter",
  "transactionTimeout" : 10,
  "numMessagesPerTransaction" : 50,
  "isEnableTransaction" : false,
  "isAbortTransaction" : false,
  "histogramFile" : null
}
2025-12-05T10:02:41,801+0000 [pulsar-perf-producer-exec-1-1] INFO  org.apache.pulsar.testclient.PerformanceProducer - Started performance test thread 0
2025-12-05T10:02:42,472+0000 [pulsar-perf-producer-exec-1-1] INFO  org.apache.pulsar.testclient.PerformanceProducer - Adding 1 publishers on topic persistent://public/default/sync-topic
2025-12-05T10:02:42,696+0000 [pulsar-client-io-2-1] INFO  org.apache.pulsar.client.impl.ConnectionPool - [[id: 0x126aff06, L:/10.233.127.13:37780 - R:my-pulsar-proxy.stu245087-default.svc.cluster.local/10.233.20.236:6650]] Connected to server
2025-12-05T10:02:44,867+0000 [pulsar-client-io-2-1] INFO  org.apache.pulsar.client.impl.ConnectionPool - [[id: 0x98bc1a43, L:/10.233.127.13:37804 - R:my-pulsar-proxy.stu245087-default.svc.cluster.local/10.233.20.236:6650]] Connected to server
2025-12-05T10:02:44,868+0000 [pulsar-client-io-2-1] INFO  org.apache.pulsar.client.impl.ClientCnx - [id: 0x98bc1a43, L:/10.233.127.13:37804 - R:my-pulsar-proxy.stu245087-default.svc.cluster.local/10.233.20.236:6650] Connected through proxy to target broker at my-pulsar-broker-2.my-pulsar-broker.stu245087-default.svc.cluster.local:6650
2025-12-05T10:02:44,884+0000 [pulsar-client-io-2-1] INFO  org.apache.pulsar.client.impl.ProducerImpl - [persistent://public/default/sync-topic] [null] Creating producer on cnx [id: 0x98bc1a43, L:/10.233.127.13:37804 - R:my-pulsar-proxy.stu245087-default.svc.cluster.local/10.233.20.236:6650]
2025-12-05T10:02:44,945+0000 [pulsar-client-io-2-1] INFO  org.apache.pulsar.client.impl.ProducerImpl - [persistent://public/default/sync-topic] [my-pulsar-30-0] Created producer on cnx [id: 0x98bc1a43, L:/10.233.127.13:37804 - R:my-pulsar-proxy.stu245087-default.svc.cluster.local/10.233.20.236:6650]
2025-12-05T10:02:44,949+0000 [pulsar-perf-producer-exec-1-1] INFO  org.apache.pulsar.testclient.PerformanceProducer - Created 1 producers
2025-12-05T10:02:51,917+0000 [main] INFO  org.apache.pulsar.testclient.PerformanceProducer - Throughput produced:   55113 msg ---   5511.1 msg/s ---     21.5 Mbit/s  --- failure      0.0 msg/s --- Latency: mean: 494.011 ms - med:  34.112 - 95pct: 1720.367 - 99pct: 1873.271 - 99.9pct: 1910.007 - 99.99pct: 1913.863 - Max: 1914.343
2025-12-05T10:02:55,254+0000 [pulsar-client-io-2-1] WARN  org.apache.pulsar.client.impl.ClientCnx - [my-pulsar-proxy.stu245087-default.svc.cluster.local/10.233.20.236:6650] Got exception io.netty.channel.unix.Errors$NativeIoException: writevAddresses(..) failed with error(-104): Connection reset by peer
2025-12-05T10:02:55,290+0000 [pulsar-client-io-2-1] INFO  org.apache.pulsar.client.impl.ClientCnx - [id: 0x98bc1a43, L:/10.233.127.13:37804 ! R:my-pulsar-proxy.stu245087-default.svc.cluster.local/10.233.20.236:6650] Disconnected
2025-12-05T10:02:55,307+0000 [pulsar-client-io-2-1] INFO  org.apache.pulsar.client.impl.ConnectionHandler - [persistent://public/default/sync-topic] [my-pulsar-30-0] Closed connection [id: 0x98bc1a43, L:/10.233.127.13:37804 ! R:my-pulsar-proxy.stu245087-default.svc.cluster.local/10.233.20.236:6650] -- Will try again in 0.1 s, hostUrl: null
2025-12-05T10:02:55,325+0000 [pulsar-client-io-2-1] INFO  org.apache.pulsar.client.impl.ClientCnx - [id: 0x126aff06, L:/10.233.127.13:37780 ! R:my-pulsar-proxy.stu245087-default.svc.cluster.local/10.233.20.236:6650] Disconnected
2025-12-05T10:02:55,412+0000 [pulsar-timer-8-1] INFO  org.apache.pulsar.client.impl.ConnectionHandler - [persistent://public/default/sync-topic] [my-pulsar-30-0] Reconnecting after 0.1 s timeout, hostUrl: null
2025-12-05T10:02:55,421+0000 [pulsar-client-io-2-1] INFO  org.apache.pulsar.client.impl.ConnectionPool - [[id: 0x01eedf43, L:/10.233.127.13:32852 - R:my-pulsar-proxy.stu245087-default.svc.cluster.local/10.233.20.236:6650]] Connected to server
2025-12-05T10:02:55,452+0000 [pulsar-client-io-2-1] INFO  org.apache.pulsar.client.impl.ConnectionPool - [[id: 0xb0edbbf5, L:/10.233.127.13:32856 - R:my-pulsar-proxy.stu245087-default.svc.cluster.local/10.233.20.236:6650]] Connected to server
2025-12-05T10:02:55,453+0000 [pulsar-client-io-2-1] INFO  org.apache.pulsar.client.impl.ClientCnx - [id: 0xb0edbbf5, L:/10.233.127.13:32856 - R:my-pulsar-proxy.stu245087-default.svc.cluster.local/10.233.20.236:6650] Connected through proxy to target broker at my-pulsar-broker-2.my-pulsar-broker.stu245087-default.svc.cluster.local:6650
2025-12-05T10:02:55,469+0000 [pulsar-client-io-2-1] INFO  org.apache.pulsar.client.impl.ProducerImpl - [persistent://public/default/sync-topic] [my-pulsar-30-0] Creating producer on cnx [id: 0xb0edbbf5, L:/10.233.127.13:32856 - R:my-pulsar-proxy.stu245087-default.svc.cluster.local/10.233.20.236:6650]
2025-12-05T10:02:55,485+0000 [pulsar-client-io-2-1] INFO  org.apache.pulsar.client.impl.ProducerImpl - [persistent://public/default/sync-topic] [my-pulsar-30-0] Created producer on cnx [id: 0xb0edbbf5, L:/10.233.127.13:32856 - R:my-pulsar-proxy.stu245087-default.svc.cluster.local/10.233.20.236:6650]
2025-12-05T10:02:55,486+0000 [pulsar-client-io-2-1] INFO  org.apache.pulsar.client.impl.ProducerImpl - [persistent://public/default/sync-topic] [my-pulsar-30-0] Re-Sending 45964 messages to server
2025-12-05T10:03:01,979+0000 [main] INFO  org.apache.pulsar.testclient.PerformanceProducer - Throughput produced:  169622 msg ---  11302.7 msg/s ---     44.2 Mbit/s  --- failure      0.0 msg/s --- Latency: mean: 1268.098 ms - med: 226.320 - 95pct: 4235.487 - 99pct: 4675.487 - 99.9pct: 4774.623 - 99.99pct: 4784.415 - Max: 4785.343
2025-12-05T10:03:12,002+0000 [main] INFO  org.apache.pulsar.testclient.PerformanceProducer - Throughput produced:  265729 msg ---   9556.4 msg/s ---     37.3 Mbit/s  --- failure      0.0 msg/s --- Latency: mean:  18.698 ms - med:  17.377 - 95pct:  30.947 - 99pct:  52.812 - 99.9pct: 101.928 - 99.99pct: 109.836 - Max: 110.820
2025-12-05T10:03:22,038+0000 [main] INFO  org.apache.pulsar.testclient.PerformanceProducer - Throughput produced:  370433 msg ---  10446.5 msg/s ---     40.8 Mbit/s  --- failure      0.0 msg/s --- Latency: mean:  50.826 ms - med:  17.871 - 95pct: 327.461 - 99pct: 528.295 - 99.9pct: 603.131 - 99.99pct: 612.331 - Max: 613.311
2025-12-05T10:03:32,066+0000 [main] INFO  org.apache.pulsar.testclient.PerformanceProducer - Throughput produced:  470849 msg ---  10002.4 msg/s ---     39.1 Mbit/s  --- failure      0.0 msg/s --- Latency: mean:  20.734 ms - med:  16.778 - 95pct:  37.445 - 99pct: 142.114 - 99.9pct: 184.731 - 99.99pct: 193.575 - Max: 194.571
2025-12-05T10:03:42,087+0000 [main] INFO  org.apache.pulsar.testclient.PerformanceProducer - Throughput produced:  571035 msg ---   9994.3 msg/s ---     39.0 Mbit/s  --- failure      0.0 msg/s --- Latency: mean:  17.174 ms - med:  14.997 - 95pct:  30.840 - 99pct:  77.958 - 99.9pct: 111.399 - 99.99pct: 116.830 - Max: 117.811
2025-12-05T10:03:44,952+0000 [pulsar-perf-producer-exec-1-1] INFO  org.apache.pulsar.testclient.PerformanceProducer - ------------- DONE (reached the maximum duration: [60 seconds] of production) --------------
2025-12-05T10:03:44,953+0000 [pulsar-perf-producer-exec-1-1] INFO  org.apache.pulsar.client.impl.PulsarClientImpl - Client closing. URL: pulsar://my-pulsar-proxy:6650/
2025-12-05T10:03:44,973+0000 [pulsar-client-io-2-1] INFO  org.apache.pulsar.client.impl.ProducerImpl - [persistent://public/default/sync-topic] [my-pulsar-30-0] Closed Producer
2025-12-05T10:03:44,984+0000 [pulsar-client-io-2-1] INFO  org.apache.pulsar.client.impl.ClientCnx - [id: 0x01eedf43, L:/10.233.127.13:32852 ! R:my-pulsar-proxy.stu245087-default.svc.cluster.local/10.233.20.236:6650] Disconnected
2025-12-05T10:03:44,985+0000 [pulsar-client-io-2-1] INFO  org.apache.pulsar.client.impl.ClientCnx - [id: 0xb0edbbf5, L:/10.233.127.13:32856 ! R:my-pulsar-proxy.stu245087-default.svc.cluster.local/10.233.20.236:6650] Disconnected
2025-12-05T10:03:52,099+0000 [perf-client-shutdown] INFO  org.apache.pulsar.testclient.PerformanceProducer - Aggregated throughput stats --- 600008 records sent --- 8534.364 msg/s --- 33.337 Mbit/s 
2025-12-05T10:03:52,143+0000 [perf-client-shutdown] INFO  org.apache.pulsar.testclient.PerformanceProducer - Aggregated latency stats --- Latency: mean: 306.006 ms - med:  18.407 - 95pct: 2468.799 - 99pct: 4218.335 - 99.9pct: 4729.055 - 99.99pct: 4779.967 - 99.999pct: 4784.767 - Max: 4785.343
